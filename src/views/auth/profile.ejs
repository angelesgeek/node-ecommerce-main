<!DOCTYPE html>
<html lang="es">

<head>
    <%- include('../partials/head') %>

</head>

<body>
    <%- include('../partials/headeradmin') %>

        <!--Main layout-->
        <main class="mt-5 pt-4 bg-dark white-text">
            <div class="container bg-dark">
                <h2 class="mt-5 mb-3 h2 text-center">
                    Perfil de <%= locals.userLogged.name%>
                </h2>
                <div class="card mb-5 bg-dark white-text">
                    <div class="card-header bg-danger">
                        Mis Datos
                    </div>

                    <div class="card-body">
                        <p><span class="font-weight-bold mr-2">Nombre: </span><%= locals.userLogged.name %></p>
                        <p><span class="font-weight-bold mr-2">Email: </span><%= locals.userLogged.email %></p>
                    </div>
                      
                </div>
                
                <div class="card mb-5 bg-dark white-text">
                    <div class="card-header bg-danger">
                        Mis Pedidos
                    </div>
                    <div class="card-body white-text">
                        <table class="table table-responsive-md mb-0">
                            <thead>
                                <tr>
                                    <th class="white-text" style="width: 50px;">
                                        <strong>#</strong>
                                    </th>
                                    <th class="white-text">
                                        <strong>Fecha</strong>
                                    </th>
                                    <th class="white-text">
                                        <strong>Env√≠o</strong>
                                    </th>
                                    <th class="white-text">
                                        <strong>Pago</strong>
                                    </th>
                                    <th class="white-text">
                                        <strong>Total</strong>
                                    </th>
                                    <th style="width: 50px;"></th>
                                </tr>
                            </thead>
                            <tbody class="white-text">
                                <% orders.forEach((order,index)=> { %>
                                    <tr>
                                        <th scope="row">
                                            <%= index + 1 %>
                                        </th>
                                        <td>
                                            <%= new Intl.DateTimeFormat('es-ES', { year: 'numeric' , month: 'numeric' ,
                                                day: '2-digit' ,hour: 'numeric' , minute: 'numeric'
                                                }).format(order.createdAt) %>
                                        </td>
                                        <td>
                                            <%= order.shippingMethod %>
                                        </td>
                                        <td>
                                            <%= order.paymentMethod %>
                                        </td>
                                        <td>$ <%= order.total %>
                                        </td>
                                        <td><a class="btn btn-warning btn-sm" href="<%= `/order/${order.id}` %> "><i
                                                    class="fas fa-eye"></i></a>
                                        </td>
                                    </tr>
                                    <% }); %>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="card mb-5 bg-dark white-text">
                    <%- include('../partials/messages') %>
                </div>
                <div class="card mb-5 bg-dark white-text">
                    <div class="card-header bg-danger white-text">
                        Mensajes Recibidos
                    </div>
                    <div class="card-body">
                        <table class="table table-responsive-md mb-0">
                            <thead>
                                <tr class="white-text">
                                    <% messages.forEach( message=> { %>
                                        <%- include('../partials/mensajesRecibidos', {message}) %>
                                            <% } ) %>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>
            </div>
        </main>
        <!--Main layout-->
        <%- include('../partials/footer') %>
            <%- include('../partials/scripts') %>
</body>

</html>